<template name="workBoard">
    {{#with project}}
    <div class="page-header">
        <h1>{{gitlab.name}} - Work Board</h1>
        <input type="hidden" id="projectId" ref={{_id}}>
    </div>
    Work board for project: {{_id}} (Gitlab -<a href="{{gitlab.web_url }}">{{gitlab.name}}</a>) {{/with}} {{#if sprint}}
    <div class="row">
        <p class="col-md-12">
            <h3>{{sprint.name}}: End date: {{sprint.endDate}}</h3>
            {{> workBoardProgressBar}}
        </p>
        <div class="col-md-3">
            <h4>Issues:</h4>
        </div>
        <div class="col-md-3">
            <h4>To do:</h4>
        </div>
        <div class="col-md-3">
            <h4>In progress:</h4>
        </div>
        <div class="col-md-3">
            <h4>Done:</h4>
        </div>
    </div>
    {{#each issues}}
    <div class="row issue-panel" id="{{_id}}">
        <div class="col-md-3">
            {{>issueItemTmpl}}
        </div>
        <div class="todo col-md-3" id="{{_id}}">
            {{#each taskList _id 'toDo'}} {{>taskItemTmpl}} {{/each}}
        </div>
        <div class="inprogress col-md-3" id="{{_id}}">
            {{#each taskList _id 'inProgress'}} {{>taskItemTmpl}} {{/each}}
        </div>
        <div class="done col-md-3" id="{{_id}}">
            {{#each taskList _id 'done'}} {{>taskItemTmpl}} {{/each}}
        </div>
    </div>
    {{/each}}
    <div class="row">
        <p class="footer col-md-3"></p>
        <div id="stats" class="col-md-12">{{sprintStats sprint._id}}</div>
    </div>
    {{else}}
    <div class="row">
        <div class="col-md-12">
            <h3>Your project has no active sprints. Start one using plan board.</h3>
        </div>
    </div>
    {{/if}}
</template>

<template name="workBoardProgressBar">
    <h5>Task distribution:</h5>
    <div class="progress">
        <div class="progress-bar progress-bar-danger" style="width: {{progress sprint._id 'toDo'}}%">
            {{progress sprint._id 'toDo'}}% To do
        </div>
        <div class="progress-bar progress-bar-warning" style="background-color: #f0ad4e; width: {{progress sprint._id 'inProgress'}}%">
            {{progress sprint._id 'inProgress'}}% In progress
        </div>
        <div class="progress-bar progress-bar-success" style="width: {{progress sprint._id 'done'}}%">
            {{progress sprint._id 'done'}}% Done
        </div>
    </div>
</template>